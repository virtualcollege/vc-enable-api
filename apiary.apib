FORMAT: 1A

# Enable API
Enable API is a service for integrating with Virtual College's Enable platform. It is available at: https://external-api.vc-enable.co.uk/.

The Enable API can be used to retrieve information that is stored within Enable, as well as carrying out several actions.  See the documentation below for what is available via this API.  In the vast majority of cases, custom development work will be required to be carried out by customers to interact with this API.

The API is designed to be used by other pieces of software, with the aim to support integration with other systems.  Whilst the API can be used manually (via an interface such as [Postman](https://www.getpostman.com/)), we expect most users to have custom software written to call the API.  The API (or Enable) cannot communicate directly with other systems, but the API has been made available so other systems can make use of it and perform the required actions.

# Usage
Every request to the API must specify the following headers:
- x-api-version: Allows the server to determine what version of the API should be used
- x-api-nonce: Used to protect against replay attacks.  Every request must specify a nonce that is globally unique over a given period of time.  This has a max-length of 450 characters. We suggest using a GUID to ensure that the nonce is unique.

Requests to API functions which require the client to authenticate must also specify the following headers:
- x-api-access-token: Used to authenticate the client and verify the source of API requests

**Remarks**
- Any request that does not specify x-api-version will return a 400
- Any request that specifies an unexpected x-api-version will return a 404
- Any request that does not specify x-api-nonce will return a 400
- Any request that specifies a nonce that has been used previously will return a 401
- Any request that requires authentication but does not specify x-api-access-token or specifies an invalid token will return a 401
- Tokens use the JSON Web Token format (http://jwt.io)

# Group Security

In order to authenticate with the API a client must first request an authorisation token 
which must then be encrypted and signed using the client's secret key.  The encrypted 
payload must then be posted to the server to create an access token.

Access Tokens are time limited and will expire.  When creating an access token the server
will return a timestamp of when the token will expire.

## Authorisation Token [/authorisation-tokens/{domainReference}]
Endpoint to retrieve a single Authorisation Token for use in creating an Access Token

+ Parameters
    + domainReference (required, Guid) ... The reference of the domain the client is trying to authenticate against

### Create an Authorisation Token [GET]
+ Request (application/json)

    + Header
    
            x-api-version: 1.0
            x-api-nonce: 2147483647
            
+ Response 201 (application/json)

            {
                "authorisationToken": "$2a$04$o9zKYcg8Fb8QdOqzCfAh6Ora4H//BZlYcjPFdUdYpti30rzynJ7Ca"
            }
            
+ Response 401

+ Response 404

## Access Tokens [/access-tokens]
Access tokens used to authenticate a client with the API.

The *signedAuthorisationToken* property is made up from the *authorisationToken* returned from the previous call, then encoded  using **JwtEncoder** as follows

``` 
    var data = JsonConvert.DeserializeObject<Dictionary<string,string>>(signedAuthorisationToken);
    JwtEncoder encoder = new JwtEncoder(new JWT.Algorithms.HMACSHA512Algorithm(), new JsonNetSerializer(), new JwtBase64UrlEncoder());
    authToken = encoder.Encode(data, apiPublicKey);

```

where the *apiPublicKey* is the LMS public key.

### Create an Access Token [POST]
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
    
    + Body

            {
                "domainReference": "81cd217b-177e-43e2-94fd-eac424780a4f",   
                "signedAuthorisationToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts" 
            }

+ Response 201 (application/json)

        { 
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts", 
            "tokenExpiry": "2014-11-12T14:34:19.312Z" 
        }

+ Response 401

+ Response 404

# Group Users - Common
Common User related resources of the **Enable API**

**Who can use these endpoints?**

The endpoints in this section can be used by all customers, including those that have Enable configured to authenticate users with:

+ Email Address
+ Username
+ AD FS (SSO)

For other endpoints relating to users, see <a href="#reference/users-standard-authentication">Users - Standard Authentication</a> for Email Address/Username domains, and <a href="#reference/users-ad-fs-authentication">Users - AD FS Authentication</a> for AD FS domains.

## Find Users [/users/search]
Gets a list of users.

### Search [POST]

The parameters are -
+ `search` *(optional)* A free-text search that filters the list of users based on the first name, last name, user name and email address of the user (case insensitive).
+ `pageSize` *(optional, defaults to 12)* The number of items to return for a page
+ `pageNumber` *(optional, defaults to 1)* The requested page.  This number is 1-based (such as the first page is `pageNumber: 1`)
+ `order` *(optional, defaults to AlphaAscending)* The order of the users.  The available options are -
    + AlphaAscending
    + AlphaDescending
    + DateAscending
    + DateDescending

Returned properties are -
+ `totalUsers` The total number of users that match the current request, across all pages.  This is an **INT**
+ `users` An array of users
+ `users\reference` The reference of the user within an LMS.  This is a **GUID**
+ `users\firstName` This is the first name of the user
+ `users\lastName` This is the last name of the user
+ `users\emailAddress` This is the email address of the user
+ `users\userName` This is the user name of the user
+ `users\createdDate` This is the date and time at which the user was created.  This date is **UTC**, according to **ISO 8601**
+ `users\isInactive` A boolean value to denote if the user is inactive or not
+ `users\providerUserKey` This is the security identifier of the ADFS user (only applicable for SSO AD domains)
+ `users\additional` An array of additional properties, including optional fields
+ `users\additional\name` The name of the property, in English
+ `users\additional\value` The value of the property.  The type will be dependent on the type of the field itself

No results will return `totalUsers: 0` and an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "search": "user1", 
                "pageSize": 24,
                "pageNumber": 1,
                "order": "DateDescending"
            }
    
+ Response 200 (application/json)

        { 
            "totalUsers": 123, 
            "users": 
            [
                {
                    "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "firstName": "Jamie",
                    "lastName": "Burns",
                    "userName": "jamie.burns@virtual-college.co.uk",
                    "emailAddress": "jamie.burns@virtual-college.co.uk",
                    "createdDate": "2012-04-23T18:25:43.511Z",
                    "isInactive": false
                    "providerUserKey":"",
                    "additional":
                    [
                        {
                            "name": "jobTitle",
                            "value": "Software Architect"
                        },
                        {
                            "name": "userStartDate",
                            "value": "01-Jan-2016"
                        }
                    ]
                },
                {
                    "reference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "firstName": "Alex",
                    "lastName": "Woodhead",
                    "userName": "alex.woodhead@virtual-college.co.uk",
                    "emailAddress": "alex.woodhead@virtual-college.co.uk",
                    "createdDate": "2013-04-23T18:25:43.511Z",
                    "isInactive": true
                    "providerUserKey":"",
                    "additional": []
                }
            ]
        }

+ Response 401

+ Response 404

## Optional Fields [/users/optionalFields]
Gets the list of available optional fields

Returned properties are -
+ `name` The name of the optional field, in English
+ `type` The descriptive type of the optional field

The types available are -
+ `String` A string
+ `Number` A number
+ `Date` A date
+ `PassedDate` A date in the past
+ `PositiveNumber` A positive number
+ `NonLocalisedPassedDate` A date without time, which is in the past
+ `NonLocalisedDate` A date without time

### List [GET]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
+ Response 200 (application/json)

        [
            {
                "name": "DateOfBirth",
                "type": "Unlocalised date in the past",
            },
            {
                "name": "JobTitle",
                "type": "Text",
            }
        ]

+ Response 401

+ Response 404

## Count Users - Current Day [/users/recentCount]
A count of the number of users added, and who have logged in, since midnight (UTC).  This counts users across all domains for all customers.

Users who exist in multiple LMSs are counted only once.

### Retrieve recent count [GET]
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
+ Response 200 (application/json)

        { 
            123
        }
        
+ Response 401

+ Response 404

## Count Users - Total [/users/count]
A count of the number of users added, and who have logged in, in total.  This counts users across all domains for all customers.

Users who exist in multiple LMSs are counted only once.

### Retrieve total count [GET]
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
+ Response 200 (application/json)

        { 
            1234
        }
        
+ Response 401

+ Response 404

# Group Users - Standard Authentication
User related resources of the **Enable API**

**Who can use these endpoints?**

The endpoints in this section can only be used by customers that have Enable configured to authenticate users with either:
+ Email Address
+ Username

Customers using **AD FS (SSO)** authentication will receive a 403 Forbidden error, and the endpoints in the <a href="#reference/users-ad-fs-authentication">Users - AD FS Authentication</a> section should be used instead.

## Create User [/users/]
Creates a new user

### Add [POST]

The parameters are -
+ `emailAddress` *(required)* The user's email address. Maximum 100 characters, and must be of a valid email address format. Email address must be unique.
+ `userName` *(required for domain using user name to identify the user)* The user's user name. Maximum 100 characters. User name must be unique. 
+ `firstName` *(required)* The user's first name. Maximum 255 characters
+ `lastName` *(required)* This user's last name. Maximum 255 characters
+ `additional` *(required for mandatory fields and optional otherwise)* An array of name value pairs for optional fields
+ `additional\name` *(required)* The name of the property, in English
+ `additional\value` *(optional)* The value of the property. Maximum 255 characters.  The type will be dependent on the type of the field itself
+ `groupReferences` *(optional)* An array of Groups (GUIDs) to add the user to. Users are only added to groups via this call, not removed.
+ `lineManagerReferences` *(optional)* An array of Users (GUIDs) to associate as Line Managers for the user. Line Managers are only added to Users via this call, not removed.
+ `sendWelcomeEmail` *(optional)* A boolean indicating whether the welcome email should be sent to the user.  Defaults to true

Returned properties are -
+ `reference` The reference of the user within an LMS.  This is a **GUID**
+ `firstName` This is the first name of the user
+ `lastName` This is the last name of the user
+ `emailAddress` This is the email address of the user
+ `userName` This is the user name of the user
+ `createdDate` This is the date and time at which the user was created.  This date is **UTC**, according to **ISO 8601**
+ `additional\name` *(required)* The name of the property, in English
+ `additional\value` *(optional)* The value of the property.  The type will be dependent on the type of the field itself

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "firstName": "Jamie",
                "lastName": "Burns",
                "emailAddress": "jamie.burns@virtual-college.co.uk",
                "userName": "jb",
                "additional":
                [
                    {
                        "name": "jobTitle",
                        "value": "Software Architect"
                    },
                    {
                        "name": "userStartDate",
                        "value": "01-Jan-2016"
                    }
                ],
                "groupReferences": ["e9f27sa5-01fd-4138-9451-e25ddaa70a7d","c9f2b0a5-01fd-4138-9451-e25ddaa70a9a"],
                "lineManagerReferences": ["b2d3c693-9b0e-4842-bec2-38a82c9f5569","cc93f516-50ff-4376-be37-0682cf9b0671"]
            }
            
+ Response 201 (application/json)

        {
            "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
            "firstName": "Jamie",
            "lastName": "Burns",
            "emailAddress": "jamie.burns@virtual-college.co.uk",
            "userName": "jb",
            "createdDate": "2012-04-23T18:25:43.511Z",
            "additional":
            [
                {
                    "name": "jobTitle",
                    "value": "Software Architect"
                },
                {
                    "name": "userStartDate",
                    "value": "01-Jan-2016"
                }
            ]
        }

+ Response 401

        {
            "Error description 1",
            "Error description 2"
        }

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

## Manage User Details [/users/{userIdentifier}]
Gets or updates the details of a specific user. It does not change the status of the user.

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users) to search by (case insensitive). This value must be encoded for use in URIs - e.g. the @ character should be replaced with %40

Returned properties are -
+ `reference` The reference of the user within an LMS.  This is a **GUID**
+ `firstName` This is the first name of the user
+ `lastName` This is the last name of the user
+ `emailAddress` This is the email address of the user
+ `userName` This is the user name of the user
+ `createdDate` This is the date and time at which the user was created.  This date is **UTC**, according to **ISO 8601**
+ `users\isInactive` A boolean value to denote if the user is inactive or not
+ `additional` An array of optional fields
+ `additional\name` The name of the property, in English
+ `additional\value` The value of the property.  The type will be dependent on the type of the field itself

When updating, only the following properties can be changed -
+ `firstName` *(required)* This can be freely changed. Maximum 255 characters
+ `lastName` *(required)* This can be freely changed. Maximum 255 characters
+ `emailAddress` *(required)* This can only be changed if the user with the same email address does not exist in other LMSs. Maximum 100 characters.  Email address must be unique.
+ `userName` *(required for domains using user name to identify the user)* This can only be changed if the user with the same user name does not exist in current LMSs. Maximum 100 characters. User name must be unique. 
+ `additional` *(required for missing mandatory fields and optional otherwise)* An array of optional fields.  If a mandatory field does not already exists for the user and not providing it while updating, will throw an error. Other fields not provided in the list will remain unchanged when persisted
+ `additional\name` *(required)* The name of the property, in English
+ `additional\value` *(optional)* The value of the property.  The type will be dependent on the type of the field itself
+ `groupReferences` *(optional)* An array of Groups (GUIDs) to add the user to. Users are only added to groups via this call, not removed.
+ `lineManagerReferences` *(optional)* An array of Users (GUIDs) to associate as Line Managers for the user. Line Managers are only added to Users via this call, not removed.

When patching, only the following properties can be changed -
+ `firstName` *(optional)* This can be freely changed. Maximum 255 characters
+ `lastName` *(optional)* This can be freely changed. Maximum 255 characters
+ `emailAddress` *(optional)* This can only be changed if the user with the same email address does not exist in other LMSs. Maximum 100 characters
+ `userName` *(optional)* This can only be changed if the user with the same user name does not exist in current LMSs. Maximum 100 characters

### Find [GET]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
+ Response 200 (application/json)

        {
            "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
            "firstName": "Jamie",
            "lastName": "Burns",
            "userName": "jamie.burns@virtual-college.co.uk",
            "emailAddress": "jamie.burns@virtual-college.co.uk",
            "createdDate": "2012-04-23T18:25:43.511Z",
            "isInactive" : false,
            "additional":
            [
                {
                    "name": "jobTitle",
                    "value": "Software Architect"
                },
                {
                    "name": "userStartDate",
                    "value": "01-Jan-2016"
                }
            ]
        }

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

### Update [PUT]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "firstName": "Jamie",
                "lastName": "Burns",
                "emailAddress": "jamie.burns@virtual-college.co.uk",
                "userName": "jamie.burns@virtual-college.co.uk",
                "additional":
                [
                    {
                        "name": "jobTitle",
                        "value": "Software Architect"
                    }
                ],
                "groupReferences": ["e9f27sa5-01fd-4138-9451-e25ddaa70a7d","c9f2b0a5-01fd-4138-9451-e25ddaa70a9a"],
                "lineManagerReferences": ["b2d3c693-9b0e-4842-bec2-38a82c9f5569","cc93f516-50ff-4376-be37-0682cf9b0671"]
            }
            

            
+ Response 200 (application/json)

        {
            "userInstanceAccountReference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
            "firstName": "Jamie",
            "lastName": "Burns",
            "emailAddress": "jamie.burns@virtual-college.co.uk",
            "userName": "jamie.burns@virtual-college.co.uk",
            "createdDate": "2012-04-23T18:25:43.511Z",
            "isInactive": true,
            "additional":
            [
                {
                    "name": "jobTitle",
                    "value": "Software Architect"
                },
                {
                    "name": "userStartDate",
                    "value": "01-Jan-2016"
                }
            ]
        }

+ Response 401

        {
            "Error description 1",
            "Error description 2"
        }

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

### Patch [PATCH]

+ Request (application/merge-patch+json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "firstName": "Test",
                "lastName": "User"
                
            }
            
+ Response 200 (application/json)

        {
            "userInstanceAccountReference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
            "firstName": "Test",
            "lastName": "User",
            "emailAddress": "jamie.burns@virtual-college.co.uk",
            "userName": "jamie.burns@virtual-college.co.uk",
            "createdDate": "2012-04-23T18:25:43.511Z",
            "isInactive": true,
            "additional":
            [
                {
                    "name": "jobTitle",
                    "value": "Software Architect"
                },
                {
                    "name": "userStartDate",
                    "value": "01-Jan-2016"
                }
            ]
        }

+ Response 401

        {
            "Error description 1",
            "Error description 2"
        }

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

### Delete [DELETE]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
+ Response 200 (application/json)

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

## Set Inactive [/users/{userIdentifier}/SetInactive]
Set a user as inactive.

### SetInactive [POST]

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users).

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
            
+ Response 201 (application/json)

        "User Deactivated"

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

+ Response 409

## Set Active [/users/{userIdentifier}/SetActive]
Set a user as active.

### SetActive [POST]

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users).

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
            
+ Response 201 (application/json)

        "User Activated"

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

+ Response 409

## Remove User From Groups [/users/{userIdentifier}/RemoveFromGroups]

Removes a user from a list of groups.

### Remove User From Groups [POST]

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users).
+ `references` *(required)* An array of references for each group the user is intended to be removed from

 Removes the specified user from the groups. Accepts a list of references to identify the groups and an identifier for the target user.
 
 If the user is not found an error will be returned.
 
 If a group is not found for a specific reference, then that reference will be returned in an error.
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "references": 
                [
                    "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
                ]
            }
            
+ Response 200

+ Response 400

        [
            "Cannot find group: e9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
        ]
        
        OR
        
        [
            "Cannot find user with username1"
        ]

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

## Remove Line Managers For User [/users/{userIdentifier}/RemoveLineManagersForUser]

Removes line managers for a user
### Remove Line Managers For A User [POST]

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users).
+ `references` *(required)* An array of Line Managers' references to be removed from the user

 Removes Line Managers for the user. Accepts a list of references to identify the Line Managers and an identifier for the target user.
 
 If the user is not found an error will be returned.
 
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "references": 
                [
                    "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
                ]
            }
            
+ Response 200

+ Response 400
        
        [
            "Cannot find user with username1"
        ]

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404



## Resend Welcome Emails [/users/ResendWelcomeEmail]
Resends welcome emails to specific users.

### ResendWelcomeEmail [POST]

The parameters are -
+ `userIdentifiers` *(required)* An array of exact email addresses (for domains using email to identify users) or user names (for domains using user name to identify users).

Users will only be resent a welcome email if they have either never received a welcome email, or if they have not yet logged in.

If a user has already received a welcome email and they have logged in, they will be ignored during this request.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
    
            {
                userIdentifiers:
                [
                    "jamie.burns@virtual-college.co.uk",
                    "darren.lawson@virtual-college.co.uk"
                ]
            }
            
+ Response 200 (application/json)

+ Response 400
            
+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

+ Response 409

## Resend Welcome Email [/users/{userIdentifier}/ResendWelcomeEmail]
Resends welcome emails to a specific user.

### ResendWelcomeEmail [POST]

The parameters are -
+ `userIdentifier` *(required)* The exact email address (for domains using email to identify users) or user name (for domains using user name to identify users).

Users will only be resent a welcome email if they have either never received a welcome email, or if they have not yet logged in.

If a user has already received a welcome email and they have logged in, a 400 Bad Request error will be returned.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
            
+ Response 200 (application/json)

+ Response 400
            
+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

+ Response 409

## Send Welcome Emails [/users/SendWelcomeEmail]
Sends welcome emails to all users who have not received one yet.

### SendWelcomeEmail [POST]

Users who have already been sent a welcome email will not receive a second welcome email, even if they haven't logged in yet.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
            
+ Response 200 (application/json)

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

+ Response 409

# Group Users - AD FS Authentication

SSO User related resources of the **Enable API**

**Who can use these endpoints?**

The endpoints in this section can only be used by customers that have Enable configured to authenticate users with:
+ AD FS (SSO)

Customers using **Email Addresses** or **Usernames** authentication will receive a 403 Forbidden error, and the endpoints in the <a href="#reference/users-standard-authentication">Users - Standard Authentication</a> section should be used instead.


## Synchronise Users [/users/SSO]
Synchronises users from an external source into the LMS.

Accepts an array of user objects.  The "id" property is used to identify the user.

### Import users [POST]

The parameters are -
+ `id` *(required)* The id of the user.  For AD FS SSO, this should be the SID
+ `firstName` *(required)* The first name of the user.  Maximum 255 characters
+ `lastName` *(required)* The last name of the user.  Maximum 255 characters
+ `emailAddress` *(required)* The email address of the user.  Maximum 100 characters
+ `accountName` *(optional)* The account name of the user.  For AD FS SSO, this should be the SamAccountName.  Maximum 100 characters
+ `groupReferences` *(optional)* An array of Groups (GUIDs) to add the user to. Users are only added to groups via this call, not removed.
+ `lineManagers` *(optional)* An array of Line Manager User Ids (SIDs) to associate with the user. Line Managers are only added to users via this call, not removed.  A user cannot be their own direct line manager.

If the user does not already exist, it is added.  If they already exist, they are updated.

Note: The system enforces uniqueness in the email address used and hence if the request for a new user has an email address, that is already used in the domain, an error message is returned.
  
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body

            {
                "users":
                [
                    {
                        "id": "S-1-5-21-2527162006-4105834857-2401098550-2613",
                        "firstName": "Jamie",
                        "lastName": "Burns",
                        "emailAddress": "jamie.burns@virtual-college.co.uk",
                        "accountName": "jamie.burns",
                        "groupReferences": ["e9f27sa5-01fd-4138-9451-e25ddaa70a7d","c9f2b0a5-01fd-4138-9451-e25ddaa70a9a"],
                        "lineManagers": [
                            "S-1-5-21-2527162006-4105834857-2401098550-2615"
                        ]
                    },
                    {
                        "id": "S-2-6-21-2527162006-4105834857-2401098550-2614",
                        "firstName": "Alex",
                        "lastName": "Woodhead",
                        "emailAddress": "alex.woodhead@virtual-college.co.uk",
                        "accountName": "alex.woodhead"
                    }
                ]
            }
                
+ Response 200

+ Response 400

        The request is badly formed, or is missing something required

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404

## Activate Users [/users/SSO/activate]
Sets SSO users from the LMS as active.

### Activate Users [POST]

The parameters are -

+ `id` *(required)* The id of the user. For AD FS SSO, this should be the SID

Activates the specified users. Accepts a list of ids to identify users.

If a user is not found for a specific id, then an error will be returned including the id that was not found.

+ Request (application/json)

    + Header
    
            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "ids": 
                [
                    "S-1-5-21-2527162006-4105834857-2401098550-2613",
                    "S-1-5-21-2527162006-4105834857-2401098550-2614"
                ]
            }
            
+ Response 200

+ Response 400 (application/json)

            [
                Cannot find user: S-1-5-21-2527162006-4105834857-2401098550-2614,
                Cannot find user: S-1-5-21-2527162006-4105834857-2401098550-2613,
            ]

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404

## Delete Users [/users/SSO/delete]
Deletes SSO users from the LMS.

### Delete users [POST]

The parameters are -
+ `id` *(required)* The id of the user.  For AD FS SSO, this should be the SID

 Deletes the specified users.  Accepts a list of ids to identify users.
 
 If a user is not found for a specific id, then that id is ignored.  No error will be returned for it.
  
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "ids": 
                [
                    "S-1-5-21-2527162006-4105834857-2401098550-2613",
                    "S-1-5-21-2527162006-4105834857-2401098550-2614"
                ]
            }
        
+ Response 200

+ Response 400

        The request is badly formed, or is missing something required

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404

## Remove User From Groups [/users/sso/{id}/removeGroups]

Removes a user from a list of groups.

### Remove User From Group [POST]

The parameters are -
+ `id` *(required)* The id of the user.  For AD FS SSO, this should be the SID
+ `references` *(required)* An array of references for each group the user is intended to be removed from

 Removes the specified user from the groups. Accepts a list of references to identify the groups and an id for the target user.
 
 If the user id is not found an error will be returned.
 
 If a group is not found for a specific reference, then that reference will be returned in an error.
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "references": 
                [
                    "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
                ]
            }
            
+ Response 200

+ Response 400

        [
            "Cannot find group: e9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
        ]
        
        OR
        
        [
            "Cannot find user: S-1-5-21-2527162006-4105834857-2401098550-2613"
        ]

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404

## Remove Line Managers For User [/users/sso/{id}/removeLineManagers]

Removes line managers for a user
### Remove Line Managers For A User [POST]

The parameters are -
+ `id` *(required)* The id of the user.  For AD FS SSO, this should be the SID
+ `references` *(required)* An array of line managers' references to be removed from the user

 Removes line managers for the user. Accepts a list of references to identify the line managers and an id for the target user.
 
 If the user is not found an error will be returned.
 
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                "references": 
                [
                    "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d"
                ]
            }
            
+ Response 200

+ Response 400
        
        [
            "Cannot find user: S-1-5-21-2527162006-4105834857-2401098550-2613"
        ]

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404

# Group Learn

## Modules [/learn/modules/search]

List modules that can be shown in a shop.

This will include all modules available to the API's 
LMS (including self-created modules and licenced modules).
Includes a free-text search that filters the list of modules.

### Retrieve modules [POST]

The parameters are -
+ `search` *(optional)* A free-text search that filters the list of modules based on the name of the module (case insensitive).
+ `pageSize` *(optional, defaults to 12)* The number of items to return for a page
+ `pageNumber` *(optional, defaults to 1)* The requested page.  This number is 1-based (such as the first page is `pageNumber: 1`)
+ `order` *(optional, defaults to AlphaAscending)* The order of the modules.  The available options are -
    + AlphaAscending
    + AlphaDescending
    + DateAscending
    + DateDescending

Returned properties are -
+ `totalModules` The total number of modules that match the current request, across all pages.  This is an **INT**
+ `modules` An array of modules
+ `modules\moduleReference` The reference of the module.  This is the reference that should be used when informing the LMS of any purchases.  This is a **GUID**
+ `modules\name` This is the name of the module, in English
+ `modules\description` This is the description of the module, in English
+ `modules\publishDate` This is the date and time at which the module was last published.  This date is **UTC**, according to **ISO 8601**.
+ `modules\isPosted` This is whether the module has a posted certificate.  Where an LMS is licenced a posted and non-posted version of the module, the module will appear twice in the list.  This is a **BOOL**

No results will return `totalModules: 0` and an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "search": "module1", 
                "pageSize": 24,
                "pageNumber": 1,
                "order": "DateDescending"
            }
    
+ Response 200 (application/json)

        { 
            "totalModules": 123, 
            "modules": 
            [
                {
                    "moduleReference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Module1",
                    "description": "This is module 1",
                    "publishDate": "2012-04-23T18:25:43.511Z",
                    "isPosted": false
                },
                {
                    "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Module2",
                    "description": "This is module 2",
                    "publishDate": "2012-04-23T18:25:43.511Z",
                    "isPosted": false
                },
                {
                    "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Module2",
                    "description": "This is module 2",
                    "publishDate": "2012-04-23T18:25:43.511Z",
                    "isPosted": true
                }
            ]
        }

+ Response 401

+ Response 404

## User Has Allocation [/learn/modules/userHasAllocation]
Check if the user has the module allocated.

**Who can use this endpoint?**

This endpoint can only be used by customers that have Enable configured to authenticate users with:

+ Email Address
+ Username

Customers using **AD FS (SSO)** authentication will receive a 403 Forbidden error.

### Check user has allocation [POST]

The parameters are:
+ `emailAddress` *(Required for domains using email address to identify the user)* Email Address of the user that needs to be checked
+ `userName` *(Required for domains using user name to identify the user)* User Name of the user that needs to be checked
+ `moduleReference` *(Required)* The reference of the module.
+ `isPosted`: *(Optional, defaults to false)* This is whether the module has a posted certificate. 

Returned properties are -
+ `allocationUrl` This is empty if the user doesn't exist or hasn't got the allocation. Otherwise returns the url to the module overview page.
+ `hasAllocation` A boolean value to denote if the user has allocation or not.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "emailAddress": "xyz@vc.com", 
                "userName": "xyz",
                "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                "isPosted": false
            }
    
+ Response 200 (application/json)

        {
        "allocationUrl": "https://bedrock-web.devmachine.com/Learn/Learning/LearnerRecord?reference=398e9d7b-e1c7-4ce7-aff8-f6dfcbf45f30",
        "hasAllocation": true
        }
        
+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 403

        This endpoint cannot be used for domains configured with SSO


## Allocate To User [/learn/modules/allocateToUser]
Creates user if doesn't exist and allocates the module irrespective of whether the user already has one or not.

**Who can use this endpoint?**

This endpoint can only be used by customers that have Enable configured to authenticate users with:

+ Email Address
+ Username

Customers using **AD FS (SSO)** authentication will receive a 403 Forbidden error.

### Allocate module to user [POST]

The parameters are -
+ `emailAddress` *(Required)* Email Address of the user that needs to be checked
+ `userName` *(Required for domains using user name to identify the user)* User Name of the user that needs to be checked
+ `moduleReference` *(Required)* The reference of the module.
+ `isPosted`: *(Optional, defaults to false)* This is whether the module has a posted certificate. 

Returned properties are -
+ `allocationUrl` Returns the url to take the user to the module overview page.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "emailAddress": "xyz@vc.com", 
                "userName": "xyz",
                "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                "isPosted": false
            }
    
+ Response 200 (application/json)

        {
        "allocationUrl": "https://bedrock-web.devmachine.com/Learn/Learning/LearnerRecord?reference=398e9d7b-e1c7-4ce7-aff8-f6dfcbf45f30"
        }
        
+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 403

        This endpoint cannot be used for domains configured with SSO

# Group Groups
Group related resources of the **Enable API**

## Find Groups [/groups/search]
Gets a list of groups.

### Search [POST]

The parameters are -
+ `search` *(optional)* A free-text search that filters the list of groups based on the name of the group (case insensitive).
+ `pageSize` *(optional, defaults to 12)* The number of items to return for a page
+ `pageNumber` *(optional, defaults to 1)* The requested page.  This number is 1-based (such as the first page is `pageNumber: 1`)
+ `order` *(optional, defaults to AlphaAscending)* The order of the groups.  The available options are -
    + AlphaAscending
    + AlphaDescending
    + DateAscending
    + DateDescending

Returned properties are -
+ `totalGroups` The total number of groups that match the current request.  This is an **INT**
+ `groups` An array of groups
+ `groups\reference` The reference of the group within an LMS.  This is a **GUID**
+ `groups\name` This is the name of the group
+ `groups\classifications` This is the comma separated classification names

No results will return `totalGroups: 0` and an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "search": "Group 1", 
                "pageSize": 24,
                "pageNumber": 1,
                "order": "DateDescending"
            }
    
+ Response 200 (application/json)

        { 
            "totalGroups": 123, 
            "groups": 
            [
                {
                    "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Group 1",
                    "classifications": "Community, Academy"
                },
                {
                    "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Group 12,
                    "classifications": ""
                }
            ]
        }

+ Response 401

+ Response 404

## Remove SSO Users From Group [/groups/{groupReference}/sso/removeusers]

Removes a list of sso users from a group.

**Who can use this endpoint?**

This endpoint can only be used by customers that have Enable configured to authenticate users with:

+ AD FS (SSO)

Customers using **Email Address** or **Username** authentication will receive a 403 Forbidden error. They should be using the non sso version of the method given in the documentation.

### Remove SSO Users From Group [POST]

The parameters are -
+ `groupReference` *(required)* The reference of the group.
+ `Ids` *(required)* An array of id's for each user intended to be removed from the group. As this is for AD FS SSO, the id should be the SID

 Removes the specified users from the group. Accepts a list of ids to identify the users and a reference for the target group.
 
 If the group reference is not a valid reference, an error will be returned.
 
 If a user is not found for a specific id, then that id will be returned in an error.
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                ids:
                [
                    "S-1-5-21-2527162006-4105834857-2401098550-2613",
                    "S-1-5-21-2527162006-4105834857-2401098550-2614"
                ]
            }
            
+ Response 200

+ Response 400

        [
            "Cannot find user: S-1-5-21-2527162006-4105834857-2401098550-2613"
        ]

+ Response 401

+ Response 403

        This endpoint can only be used for domains configured to use AD FS

+ Response 404 

## Remove Users From Group [/groups/{groupReference}/removeusers]

Removes a list of users from a group.

**Who can use this endpoint?**

This endpoint can only be used by customers that have Enable configured to authenticate users with:

+ User Name and Email Address

### Remove Users From Group [POST]

The parameters are -
+ `groupReference` *(required)* The reference of the group.
+ `UserIdentifiers` *(required)* An array of user identifiers that is used to login for each user intended to be removed from the group.

 Removes the specified users from the group. Accepts a list of email addressess or user names depending on how the customer has Enable configured to identify the users and a reference for the target group.
 
 If the group reference is not a valid reference, an error will be returned.
 
 If a user is not found for a specific identifier, then that identifier will be returned in an error.
 
+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                userIdentifers:
                [
                    "testuser1@abc.com",
                    "testuser2@abc.com"
                ]
            }
            
+ Response 200

+ Response 400

        [
            "Cannot find user: testuser2@abc.com"
        ]

+ Response 401

+ Response 403

        This endpoint can not be used for AD FS domains

+ Response 404 

## Add Group [/groups]
Add a group.

### Add [POST]

The parameters are -
+ `name` The name of the group to be created.
+ `abbreviatedName` *(optional)* The abbrivated name of the group to be created.
+ `classifications` *(optional)* An array of classification names to be associated with the created group. If a classification does not exist it will be created. Classifications can only be added and not removed via this call.
+ `groupType` The visibility of the group to users within enable. The available options are -
    + PrivateVisible
    + PrivateHidden
    + PublicJoinable
    + PublicOpen
+ `onlyGroupMembersReceiveAllocations` *(defaults to false)* Group Admins, Moderators and Read-Only will be excluded from automatic learning allocations.
+ `requiresReasonToJoin` *(defaults to false)* Determines whether uses must provide a reason to join a group when the group type is PublicJoinable.
+ `isLineManagementGroup` *(defaults to false)* Allows Line Managers to manage contained members.
+ `allowSelfRegistration` *(defaults to false)* Allows users of this group to register themselves for the LMS

A successful request will return a success message alongside the generated group id (GUID).

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "name": "Group Name", 
                "abbreviatedName": "Group",
                "classifications": ["Food", "Hygiene"],
                "groupType": "PrivateVisible",
                "onlyGroupMembersReceiveAllocations": "true",
                "isLineManagementGroup": "false",
                "allowSelfRegistration": "false",
                "requiresReasonToJoin": "false"
            }
    
+ Response 200 (application/json)

        [
            "Created new group with reference: 9750ff9f-1c26-4d7c-b836-79f084d706dd"
        ]

+ Response 401

+ Response 404

## Update Group [/groups/{groupReference}]
Updates a group.

The parameters for updating all the properties in a group -
+ `groupReference` The reference of the group.
+ `name` The name of the group.
+ `abbreviatedName` *(optional)* The abbrivated name of the group.
+ `classifications` *(optional)* An array of classification names to be associated with the group. If a classification does not exist it will be created. Classifications can only be added and not removed via this call.
+ `groupType` The visibility of the group to users within enable. The available options are -
    + PrivateVisible
    + PrivateHidden
    + PublicJoinable
    + PublicOpen
+ `onlyGroupMembersReceiveAllocations` *(defaults to false)* Group Admins, Moderators and Read-Only will be excluded from automatic learning allocations.
+ `requiresReasonToJoin` *(defaults to false)* Determines whether users must provide a reason to join a group when the group type is PublicJoinable.
+ `isLineManagementGroup` *(defaults to false)* Allows Line Managers to manage contained members.
+ `allowSelfRegistration` *(defaults to false)* Allows users of this group to register themselves for the LMS


The parameters for patching selected properties that comes with the request -
+ `groupReference` The reference of the group.
+ `name` *(optional)* The name of the group.
+ `abbreviatedName` *(optional)* The abbrivated name of the group.
+ `classifications` *(optional)* An array of classification names to be associated with the group. If a classification does not exist it will be created. Classifications can only be added and not removed via this call. Existing association of the Group with the Classification will be replaced based on the values in the property.
+ `groupType` The visibility of the group to users within enable. The available options are -
    + PrivateVisible
    + PrivateHidden
    + PublicJoinable
    + PublicOpen
+ `onlyGroupMembersReceiveAllocations` *(optional)* Group Admins, Moderators and Read-Only will be excluded from automatic learning allocations.
+ `requiresReasonToJoin` *(optional)* Determines whether users must provide a reason to join a group when the group type is PublicJoinable.
+ `isLineManagementGroup` *(optional)* Allows Line Managers to manage contained members.
+ `allowSelfRegistration` *(optional)* Allows users of this group to register themselves for the LMS


A successful request will return a success message alongside the updated group id (GUID).

### Update [PUT]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "name": "Group Name", 
                "abbreviatedName": "Group",
                "classifications": ["Food", "Hygiene"],
                "groupType": "PrivateVisible",
                "onlyGroupMembersReceiveAllocations": "true",
                "isLineManagementGroup": "false",
                "allowSelfRegistration": "false",
                "requiresReasonToJoin": "false"
            }
    
+ Response 200 (application/json)

        [
            "Successfully updated group with reference: 9750ff9f-1c26-4d7c-b836-79f084d706dd"
        ]

+ Response 401

+ Response 404   

### Patch [PATCH]

+ Request (application/merge-patch+json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "name": "Group Name", 
                "abbreviatedName": "Group",
                "classifications": ["Food", "Hygiene"],
                "groupType": "PrivateVisible",
                "onlyGroupMembersReceiveAllocations": "true"
            }
    
+ Response 200 (application/json)

        [
            "Successfully updated group with reference: 9750ff9f-1c26-4d7c-b836-79f084d706dd"
        ]

+ Response 401

+ Response 404   

# Group Classifications
Classification related resources of the **Enable API**

## Find Classifications [/classifications/search]
Gets a list of classifications.

### Search [POST]

The parameters are -
+ `search` *(optional)* A free-text search that filters the list of classifications based on the name of the classification (case insensitive).
+ `pageSize` *(optional, defaults to 12)* The number of items to return for a page
+ `pageNumber` *(optional, defaults to 1)* The requested page.  This number is 1-based (such as the first page is `pageNumber: 1`)
+ `order` *(optional, defaults to AlphaAscending)* The order of the classifications.  The available options are -
    + AlphaAscending
    + AlphaDescending
    + DateAscending
    + DateDescending

Returned properties are -
+ `totalClassifications` The total number of classifications that match the current request.  This is an **INT**
+ `classifications` An array of classifications
+ `classifications\reference` The reference of the classification within an LMS.  This is a **GUID**
+ `classifications\name` This is the name of the classification

No results will return `totalClassifications: 0` and an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "search": "Classification 1", 
                "pageSize": 24,
                "pageNumber": 1,
                "order": "DateDescending"
            }
    
+ Response 200 (application/json)

        { 
            "totalClassifications": 123, 
            "classifications": 
            [
                {
                    "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Classification 1"
                },
                {
                    "reference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                    "name": "Classification 12
                }
            ]
        }

+ Response 401

+ Response 404  

# Group Shop

Shop related resources of the **Enable API**

**Who can use these endpoints?**

The endpoints in this section can only be used by customers that have Enable configured to authenticate users with either:

+ Email Address

+ Username

Customers using **AD FS (SSO)** authentication will receive a 403 Forbidden error.

## Purchases [/shop/purchases]
Records a purchase of modules made by a user outside of the LMS.
The modules purchased will be attributed to the specified user.

### Add purchases [POST]

The parameters are -
+ `emailAddress` *(Required)* The email address of the user to whom the purchase is to be attributed
+ `userName` *(Required for domains using user name to identify the user)* The user name of the user to whom the purchase is to be attributed
+ `orderNumber` *(Required)* The order number of the purchase.  Can be alpha-numeric, maximum 50 characters
+ `orderDate` *(Required)* The date of the order.  Must be in the **ISO 8601** format
+ `totalAmount` *(Required)* The grand total of the order, including VAT and after any discounts have been applied.  Must be in the currency specified in `currencyCode`, and be a valid currency value
+ `currencyCode` *(Required)* The currency of the totals used in the order.  The code should be a valid **ISO 4217** code.
+ `vatAmount` *(Required)* The total VAT charged for the order.  Must be in the currency specified in `currencyCode`, and be a valid currency value
+ `discountAmount` *(Optional, defaults to 0)* The total amount discounted form the order.  Must be in the currency specified in `currencyCode`, and be a valid currency value
+ `products` *(Required)* The list of products included in the order.  Must contain at least one item
+ `product\name` *(Required)* The name of the product.  Can be alpha-numeric, maximum 255 characters
+ `product\id` *(Required)* The id of the product, as defined by the calling application.  Can be alpha-numberic, maximum 255 characters
+ `product\unitPrice` *(Required)* The price for a purchase of the product with a quantity of 1, before VAT and before any discounts applied.  Must be in the currency specified in `currencyCode`, and be a valid currency value
+ `product\quantity` *(Required)* The quantity of the product in the order.  Must be an **INT**
+ `product\modules` *(Required)* The modules associated with the product.  Must contain at least one item
+ `product\module\moduleReference` *(Required)* The reference of the module.  This is the reference provided by the LMS via the API.  Must be a **GUID**
+ `product\module\quantity` *(Optional, defaults to 1)* The number of modules included in the product.  If no quantity is provided, a default of **1** is used.  Must be an **INT**
+ `product\module\isPosted` *(Optional, defaults to false)* Whether the product should be posted.  Must be a **BOOL**

Returns `201` if the operation was successful, otherwise one of the error codes is returned.  Also returns the URL to which
the user should be directed.  If the user has been created as part of this call, then this link redirects to the confirmation page
that the user will complete to confirm their account.

+ Request (application/json)
    + Header
    
            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
            
    + Body
        
            { 
                "emailAddress": "darren.lawson@virtual-college.co.uk", 
                "userName": "dl", 
                "orderNumber": "abc123",
                "orderDate": "2012-04-23T18:25:43.511Z",
                "totalAmount": 190.12,
                "currencyCode": "GBP",
                "vatAmount": 40.00,
                "discountAmount": 12.34,
                "products": 
                [
                    {
                        "name": "Product1",
                        "id": "abc123",
                        "unitPrice": 12.34,
                        "quantity": 1,
                        "modules":
                        [
                            {
                                "moduleReference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                                "quantity": 3,
                                "isPosted": true
                            },
                            {
                                "moduleReference": "e9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                                "quantity": 2,
                                "isPosted": false
                            },
                            {
                                "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                                "quantity": 1
                            }
                        ]
                    },
                    {
                        "name": "Product2",
                        "id": "def456",
                        "unitPrice": 34.21,
                        "quantity": 1,
                        "modules":
                        [
                            {
                                "moduleReference": "d9f2b0a5-01fd-4138-9451-e25ddaa70a7d",
                                "quantity": 1
                            }
                        ]
                    }
                ]
            }

+ Response 201

        https://www.vc-enable.co.uk

+ Response 400

        The request is badly formed, or is missing something required

+ Response 401

+ Response 403

        This endpoint cannot be used for domains configured with SSO

+ Response 404

# Group User Report
User reporting related resources of the **Enable API**.

A report is generated by creating a report definition first, then executing that definition to retrieve the data.  

The definition defines the name of the report, as well as the various parameters that indicate what data should be included in that report.

When executing a report definition, the result is in the form of JSON.

## Definition [/reporting/core/users]
The user report definitions.

### List [GET]

Returned properties are a list of -
+ `reference` The reference of the report.  Use this when requesting the data.  This is a **GUID**
+ `name` This is the name of the report.  This is a **STRING**
+ `createdDate` This is the date when the report was created.  This date is **UTC**, according to **ISO 8601**.

No results will return an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
+ Response 200 (application/json)

        [
            {
                "reference": "89f123a8-a890-43e7-b2cb-ec38700b8c3c",
                "name": "All Users",
                "createdDate": "2019-02-18T08:29:41.167"
            },
            {
                "reference": "7470d5ab-c1d4-44d6-9507-56e6ffecaf9a",
                "name": "Users in GroupA",
                "createdDate": "2019-02-15T11:56:39.853"
            }
        ]

+ Response 401

+ Response 404

### Add [POST]

The parameters are -
+ `name` *(required)* The name of the report.  Can be alpha-numeric, maximum 255 characters.  Must be a **STRING**
+ `includeInactiveUsers` *(optional, defaults to false)* When selected, inactive users are included.  This should be a **BOOL**
+ `userFilter` *(optional)* An object that specifies the filter that determines which users are included in the report.  This should be an **OBJECT**
+ `userFilter\filterType` *(required)* The type of user filter.  Options are **group** to filter by groups and **classification** to filter by classifications.  Must be a **STRING**
+ `userFilter\selected` *(optional)* A list of references to filter by, depending on what type is set in userFilter\filterType (when 'group' is specified this will be a list of group references, when 'classification' is specified this will be a list of classification references).  When this list is not specified or empty, then all groups/classifications will be included (for example, will return users that exist in any group or classification).  Must be an **ARRAY** or **GUID**
+ `dataFilter` *(optional, defaults to 'all')* The filter applied to related data in the report.  Options are **all** to return all data, and **byUserFilter** to only return related data that matches the filter specified in the user filter.  For example, say a user has two module allocations from two different groups and the user filter is set to return just one of these groups.  The user will be included in the report regardless of the dataFilter; if 'all' is specified then the allocations for both groups the user is a member of will be included, however if 'byUserFilter' is specified then only the allocations relating to the specified group will be included.  This should be a **STRING**

Returns the reference of the created report, which is a **GUID**.  This reference is used in the endpoint to export the data.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users"
            }
            
+ Request Including inactive users (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                includeInactiveUsers: true
            }
            
+ Request By all groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                userFilter:
                {
                    filterType: "group"
                }
            }
            
+ Request By specific groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                }
            }
            
+ Request By specific groups and only include group data (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                },
                dataFilter: "byUserFilter"
            }
            
+ Request By all classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                userFilter:
                {
                    filterType: "classification"
                }
            }
            
+ Request By specific classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users",
                userFilter:
                {
                    filterType: "classification",
                    selected:
                    [
                        "eafe48c8-f1b8-4668-ad07-b0afb9dd990f",
                        "f18b1546-d222-4fe8-8382-8436882f95cb"
                    ]
                }
            }
    
+ Response 201 (application/json)

        89f123a8-a890-43e7-b2cb-ec38700b8c3c

+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 401

+ Response 404

## Delete [/reporting/core/users/{reference}]
Deletes a report that has been created via the API.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to delete.  This is returned from (POST) /reporting/core/users.

### Delete [DELETE]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
+ Response 204 (application/json)

+ Response 401

+ Response 404

## Export [/reporting/core/users/{reference}/export]
Exports the data according to the report that has been created.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to export.  This is returned from (POST) /reporting/core/users.

### Export [POST]

The parameters are -
+ `columns` *(required)* An array of the columns required to be exported.  This must be an **ARRAY** of **STRING**

The available columns are -
| Column Name                              | Description                                                                 | Restrictions                              |
|:-----------------------------------------|-----------------------------------------------------------------------------|-------------------------------------------|
| `FirstName`                              | The first name of the user                                                  |                                           |
| `LastName`                               | The last name of the user                                                   |                                           |
| `UserName`                               | The username of the user                                                    | Only available for domains using SSO or user name identification |
| `EmailAddress`                           | The email address of the user                                               |                                           |
| `HasLoggedIn`                            | Whether the user has logged in, as a boolean                                |                                           |
| `FirstLogin`                             | The date when the user first logged in, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)                  |                                           |
| `LastLogin`                              | The date when the user last logged in, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)                   |                                           |
| `LearnTimeTakenTotalSeconds`             | The total time taken (in seconds) the user has spent in learning            | Requires the LearnAllocation feature      |
| `UserCreatedDate`                        | The date when the user was first added, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)                  |                                           |
| `UserInactiveDate`                       | The date when the user was made inactive, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)                |                                           |
| `IsInactive`                             | Whether the user is inactive, as a boolean                                  |                                           |
| `IsPendingInvite`                        | Whether the user is in a pending state, awaiting confirmation, as a boolean |                                           |
| `LearnAllocationsNotStartedTotal`        | The total number of learning allocations not started                        | Requires the LearnAllocation feature      |
| `LearnAllocationsInProgressTotal`        | The total number of learning allocations in progress                        | Requires the LearnAllocation feature      |
| `LearnAllocationsCompletedTotal`         | The total number of learning allocations completed                          | Requires the LearnAllocation feature      |
| `LearnAllocationsIncompleteTotal`        | The total number of learning allocations not completed                      | Requires the LearnAllocation feature      |
| `LearnAllocationsFailedTotal`            | The total number of learning allocations failed                             | Requires the LearnAllocation feature      |
| `LearnAllocationsPassedTotal`            | The total number of learning allocations passed                             | Requires the LearnAllocation feature      |
| `LearnAllocationsAwaitingLicenceTotal`   | The total number of learning allocations awaiting a licence                 | Requires the LearnAllocation feature      |
| `LearnAllocationsTotal`                  | The total number of learning allocations                                    | Requires the LearnAllocation feature      |
| `LearnAllocationsNotStartedPercent`      | The percentage of learning allocations not started                          | Requires the LearnAllocation feature      |
| `LearnAllocationsInProgressPercent`      | The percentage of learning allocations in progress                          | Requires the LearnAllocation feature      |
| `LearnAllocationsCompletedPercent`       | The percentage of learning allocations completed                            | Requires the LearnAllocation feature      |
| `LearnAllocationsIncompletePercent`      | The percentage of learning allocations not completed                        | Requires the LearnAllocation feature      |
| `LearnAllocationsFailedPercent`          | The percentage of learning allocations failed                               | Requires the LearnAllocation feature      |
| `LearnAllocationsPassedPercent`          | The percentage of learning allocations passed                               | Requires the LearnAllocation feature      |
| `LearnAllocationsAwaitingLicencePercent` | The percentage of learning allocations awaiting a licence                   | Requires the LearnAllocation feature      |
| `Groups`                                 | The comma separated list of groups the user is a member of                  |                                           |
| `Branches`                               | The comma separated list of branches the user is a member of               | Requires the Branching feature            |
| `LineManagers`                           | The comma separated list of line managers of the user                      | Requires the LineManager feature          |
| `OptInCustomerMarketing`                 | Whether the user has opted in to marketing communications, as a boolean     |                                           |
| `TelephoneNumber`                        | The telephone number of the user                                            | Requires the optional field to be enabled |                                             
| `JobTitle`                               | The job title of the user                                                   | Requires the optional field to be enabled |                                      
| `EmployeeNumber`                         | The employee number of the user                                             | Requires the optional field to be enabled |                                            
| `DateOfBirth`                            | The date of birth of the user, as dd-MMM-yyyy (soon to change to yyyy-MM-dd)                                                | Requires the optional field to be enabled |                                          
| `ContractedHoursPerWeek`                 | The contracted hours per week of the user                                   | Requires the optional field to be enabled |                                                      
| `ReportsTo`                              | The name of which the user reports                                          | Requires the optional field to be enabled |                                               
| `Location`                               | The location of the user                                                    | Requires the optional field to be enabled |                                     
| `Company`                                | The company of the user                                                     | Requires the optional field to be enabled |                                    
| `Department`                             | The department of the user                                                  | Requires the optional field to be enabled |                                       
| `ContractStatus`                         | The contract status of the user                                             | Requires the optional field to be enabled |                                            
| `SecondaryEmailAddress`                  | The secondary email address of the user                                     | Requires the optional field to be enabled |                                                    
| `UserStartDate`                          | The start date of the user                                                   | Requires the optional field to be enabled |
| `Classifications`                        | The comma separated list of classifications                                 |                                           |                                      

Returned object -
+ `rows` The list of rows
+ `rows\cells` The list of cells within the row
+ `rows\cells\column` The readable name of the column
+ `rows\cells\columnInternalName` The system name of the column
+ `rows\cells\value` The value of the cell
+ `rows\cells\cellColor` The colour of the cell.  This will be an empty string when **hasCellColor** is false
+ `rows\cells\textColor` The colour of the text within the cell
+ `rows\cells\hasCellColor` Whether the cell has an associated colour

No results will return an object with an empty **rows** array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                columns: ["FirstName", "LastName"]
            }
    
+ Response 200 (application/json)

        {
          "rows": [
            {
              "cells": [
                {
                  "column": "First Name",
                  "columnInternalName": "FirstName",
                  "value": "Jamie",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Last Name",
                  "columnInternalName": "LastName",
                  "value": "Burns",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            }
          ]
        }

+ Response 401

+ Response 404

# Group Module Allocation Report
Module Allocation reporting related resources of the **Enable API**.

A report is generated by creating a report definition first, then executing that definition to retrieve the data.  

The definition defines the name of the report, as well as the various parameters that indicate what data should be included in that report.

When executing a report definition, the result is in the form of JSON.

## Definition [/reporting/learn/moduleAllocation]
The module allocation report definitions.

### List [GET]

Returned properties are a list of -
+ `reference` The reference of the report.  Use this when requesting the data.  This is a **GUID**
+ `name` This is the name of the report.  This is a **STRING**
+ `createdDate` This is the date when the report was created.  This date is **UTC**, according to **ISO 8601**.

No results will return an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
+ Response 200 (application/json)

        [
            {
                "reference": "89f123a8-a890-43e7-b2cb-ec38700b8c3c",
                "name": "All Modules",
                "createdDate": "2019-02-18T08:29:41.167"
            },
            {
                "reference": "7470d5ab-c1d4-44d6-9507-56e6ffecaf9a",
                "name": "Modules for GroupA",
                "createdDate": "2019-02-15T11:56:39.853"
            }
        ]

+ Response 401

+ Response 404

### Add [POST]

The parameters are -
+ `name` *(required)* The name of the report.  Can be alpha-numeric, maximum 255 characters.  Must be a **STRING**
+ `includeInactiveUsers` *(optional, defaults to false)* When selected, inactive users are included.  This should be a **BOOL**
+ `userFilter` *(optional)* An object that specifies the filter that determines which users are included in the report.  This should be an **OBJECT**
+ `userFilter\filterType` *(required)* The type of user filter.  Options are **group** to filter by groups and **classification** to filter by classifications.  Must be a **STRING**
+ `userFilter\selected` *(optional)* A list of references to filter by, depending on what type is set in userFilter\filterType (when 'group' is specified this will be a list of group references, when 'classification' is specified this will be a list of classification references).  When this list is not specified or empty, then all groups/classifications will be included (for example, will return users that exist in any group or classification).  Must be an **ARRAY** of **GUID**
+ `dataFilter` *(optional, defaults to 'all')* The filter applied to related data in the report.  Options are **all** to return all data, and **byUserFilter** to only return related data that matches the filter specified in the user filter.  For example, say a user has two module allocations from two different groups and the user filter is set to return just one of these groups.  If a dataFilter of 'all' is specified then the allocations for both groups the user is a member of will be included, however if 'byUserFilter' is specified then only the allocations relating to the specified group will be included.  This should be a **STRING**
+ `selectedModules` *(optional)* A list of module references to filter by.  When this list is not specified or empty, then all modules will be included.  Must be an **ARRAY** of **GUID**

Returns the reference of the created report, which is a **GUID**.  This reference is used in the endpoint to export the data.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Users"
            }
            
+ Request Including inactive users (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                includeInactiveUsers: true
            }
            
+ Request By all groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                userFilter:
                {
                    filterType: "group"
                }
            }
            
+ Request By specific groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                }
            }
            
+ Request By specific groups and only include group data (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                },
                dataFilter: "byUserFilter"
            }
            
+ Request By all classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                userFilter:
                {
                    filterType: "classification"
                }
            }
            
+ Request By specific classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                userFilter:
                {
                    filterType: "classification",
                    selected:
                    [
                        "eafe48c8-f1b8-4668-ad07-b0afb9dd990f",
                        "f18b1546-d222-4fe8-8382-8436882f95cb"
                    ]
                }
            }
            
+ Request By specific modules (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                name: "Report For Modules",
                selectedModules:
                [
                    "5163b1e7-7317-4310-b976-8366f03d59dd",
                    "8c87dc90-b427-4a80-9555-f7b54cbb7668"
                ]
            }
    
+ Response 201 (application/json)

        89f123a8-a890-43e7-b2cb-ec38700b8c3c

+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 401

+ Response 404

## Delete [/reporting/learn/moduleAllocation/{reference}]
Deletes a report that has been created via the API.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to delete.  This is returned from (POST) /reporting/core/users.

### Delete [DELETE]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
+ Response 204 (application/json)

+ Response 401

+ Response 404

## Export [/reporting/learn/moduleAllocation/{reference}/export]
Exports the data according to the report that has been created. Filters can be applied to any column that are requested in the report.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to export.  This is returned from (POST) /reporting/core/users.

### Export [POST]

The parameters are -
+ `columns` *(required)* An array of the columns required to be exported.  This must be an **ARRAY** of **STRING**

+ `filterLogicOperator` *(optional)*  Options are **and** / **or**. Default value is **and**

+ `filters` *(optional)* An array of filters on the fields included in the **columns** parameter

+ `filters\columnName` *(required)* The name of the column to which the filter needs to be applied

+ `filters\comparisonType` *(required)* Except for **boolean** columnn type, this is required for all the other types. It can have values like **contains**, **greater than**, **between**. See below for the full list of acceptable values.

+ `filters\value`  If the comparison type is other than **between**, then this is a required field

+ `filters\from` If the comparison type is **between** and the datatype of the column is **number** or **date**, then this is the required field. It is the starting value in the range for which the records should be fetched

+ `filters\to` If the comparison type is **between** and the datatype of the column is **number** or **date**, then this is the required field. It is the utmost value in the range for which the records should be fetched

+ `filters\hours` If datatype of the column is **duration**, then this field is required

+ `filters\minutes` If datatype of the column is **duration**, then this field is required


The available columns are -
| Column Name                                | Description                                                                                                      | Restrictions                              |ColumnType
|:-------------------------------------------|------------------------------------------------------------------------------------------------------------------|-------------------------------------------|-------------------------------------------------------
| `ModuleName`                               | The name of the module                                                                                           |                                           |Text
| `ModuleVersionNumber`                      | The version number of the module                                                                                 |                                           |Number
| `FirstName`                                | The first name of the user                                                                                       |                                           |Text
| `LastName`                                 | The last name of the user                                                                                        |                                           |Text
| `Username`                                 | The username of the user                                                                                         | Only available for domains using SSO or user name identification      |Text
| `EmailAddress`                             | The email address of the user                                                                                    |                                           |Text
| `UserCreatedDate`                          | The date when the user was first added, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)                 |                                           |Date
| `UserInactiveDate`                         | The date when the user was made inactive, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)               |                                           |Date
| `IsInactive`                               | Whether the user is inactive, as a boolean                                                                       |                                           |Boolean
| `AllocatedDate`                            | The date when the allocation was created, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)               |                                           |Date
| `StartedDate`                              | The date when the allocation was started, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)               |                                           |Date
| `CompletedDate`                            | The date when the allocation was started, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)               |                                           |Date
| `DeadlineDate`                             | The date of the allocation's deadline, if applicable, as ISO 8601 format in UTC (YYYY-MM-DDTHH:MM:SSZ)   |                                           |Date
| `ProgressPercentage`                       | The percentage progress of the allocation                                                                        |                                           |Number
| `ProgressName`                             | The progress state of the allocation, either NotAttempted, InProgress or Completed                               |                                           |Text
| `IsNotStarted`                             | Whether the allocation has not been started, as a boolean                                                        |                                           |Boolean
| `IsInProgress`                             | Whether the allocation is in progress, as a boolean                                                              |                                           |Boolean
| `IsComplete`                               | Whether the allocation is completed, as a boolean                                                                |                                           |Boolean
| `ContentStatusName`                        | The content state of the allocation, either Incomplete, Passed or Failed                                         |                                           |Text
| `IsIncomplete`                             | Whether the allocation is incomplete, as a boolean                                                               |                                           |Boolean
| `IsPassed`                                 | Whether the allocation is passed, as a boolean                                                                   |                                           |Boolean
| `IsFailed`                                 | Whether the allocation is failed, as a boolean                                                                   |                                           |Boolean
| `IsAwaitingLicence`                        | Whether the allocation is awaiting a licence, as a boolean                                                       |                                           |Boolean
| `IsOverdue`                                | Whether the allocation is overdue, as a boolean                                                                  |                                           |Boolean
| `FailedAttemptsTotal`                      | The total number of failed attempts                                                                              |                                           |Number
| `ReallocationsTotal`                       | The total number of reallocations                                                                                |                                           |Number
| `TimeTakenTotalSeconds`                    | The total time taken so far in the modules, in seconds                                                           |                                           |Duration
| `AllocationVia`                            | The source of the allocation                                                                                     |                                           |Text
| `AllocationMethod`                         | The method by which the allocation was created                                                                   |                                           |Text
| `AllocatedFromGroupName`                   | The name of the group from which the allocation was created, if applicable                                       |                                           |Text
| `AllocatedFromLearningCollectionName`      | The name of the learning collection from which the allocation was created, if applicable                         | Requires the LearningCollections feature  |Text
| `AllocatedFromLearningPlanName`            | The name of the learning plan from which the allocation was created, if applicable                               | Requires the LearningPlans feature        |Text
| `AllocatedFromLearningChunkName`           | The name of the learning chunk from which the allocation was created, if applicable                              | Requires the LearningChunks feature       |Text
| `IsAllocatedFromGroup`                     | Whether the allocation was created from a group                                                                  |                                           |Boolean
| `IsAllocatedFromInventory`                 | Whether the allocation was created from a user's inventory                                                       | Requires the Shop feature                 |Boolean
| `IsAllocatedFromInstance`                  | Whether the allocation was created from the domain                                                               |                                           |Boolean
| `IsAllocatedFromLearningCollection`        | Whether the allocation was created from a learning collection                                                    | Requires the LearningCollections feature  |Boolean
| `IsAllocatedFromLearningPlan`              | Whether the allocation was created from a learning plan                                                          | Requires the LearningPlans feature        |Boolean
| `IsAllocatedFromLearningChunk`             | Whether the allocation was created from a learning chunk                                                         | Requires the LearningChunks feature       |Boolean
| `IsAutomatic`                              | Whether the allocation was created automatically                                                                 |                                           |Boolean
| `IsManual`                                 | Whether the allocation was created manually                                                                      |                                           |Boolean
| `IsSelfEnrol`                              | Whether the allocation was via a self-enrolment                                                                  |                                           |Boolean
| `Groups`                                   | The comma separated list of groups the user is a member of                                                       |                                           |Text
| `Branches`                                 | The comma separated list of branches the user is a member of                                                     | Requires the Branching feature            |Text
| `LineManagers`                             | The comma separated list of line managers of the user                                                            | Requires the LineManager feature          |Text
| `TelephoneNumber`                          | The telephone number of the user                                                                                 | Requires the optional field to be enabled |Text
| `JobTitle`                                 | The job title of the user                                                                                        | Requires the optional field to be enabled |Text
| `EmployeeNumber`                           | The employee number of the user                                                                                  | Requires the optional field to be enabled |Text
| `DateOfBirth`                              | The date of birth of the user, as dd-MMM-yyyy (soon to change to yyyy-MM-dd)                                     | Requires the optional field to be enabled |Date
| `ContractedHoursPerWeek`                   | The contracted hours per week of the user                                                                        | Requires the optional field to be enabled |Number
| `ReportsTo`                                | The name of which the user reports                                                                               | Requires the optional field to be enabled |Text
| `Location`                                 | The location of the user                                                                                         | Requires the optional field to be enabled |Text
| `Company`                                  | The company of the user                                                                                          | Requires the optional field to be enabled |Text
| `Department`                               | The department of the user                                                                                       | Requires the optional field to be enabled |Text
| `ContractStatus`                           | The contract status of the user                                                                                  | Requires the optional field to be enabled |Text
| `SecondaryEmailAddress`                    | The secondary email address of the user                                                                          | Requires the optional field to be enabled |Text
| `UserStartDate`                            | The start date of the user                                                                                       | Requires the optional field to be enabled |Date


The **comparison types** for each of the **column types** are as follows:
+ `Text` - contains, doesnotcontain, startswith, endswith, matchesexactly, isempty, isnotempty
+ `Number` - greaterthan, greaterthanorequalto, lessthan, lessthanorequalto, equals, notequalto, between, notbetween
+ `Date` - equals, before, from, between
+ `Duration` - greaterthan, greaterthanorequalto, lessthan, lessthanorequalto, equals, notequalto


Returned object -
+ `rows` The list of rows
+ `rows\cells` The list of cells within the row
+ `rows\cells\column` The readable name of the column
+ `rows\cells\columnInternalName` The system name of the column
+ `rows\cells\value` The value of the cell
+ `rows\cells\cellColor` The colour of the cell.  This will be an empty string when **hasCellColor** is false
+ `rows\cells\textColor` The colour of the text within the cell
+ `rows\cells\hasCellColor` Whether the cell has an associated colour

No results will return an object with an empty **rows** array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB
    
    + Body
    
            {
                columns: ["FirstName", "LastName", "TimeTakenTotalSeconds", "ProgressPercentage", "IsComplete"],
                filterLogicOperator: "or",
                filters: [
                    {
                        columnName: "FirstName",
                        comparisonType: "matchesexactly",
                        value: "Jamie"
                    },
                    {
                        columnName: "LastName",
                        comparisonType: "contains",
                        value: "Bur"
                    },
                    {
                        columnName: "TimeTakenTotalSeconds",
                        comparisonType: "greaterThan",
                        hours: 1,
                        minutes: 0
                    },
                    {
                        columnName: "IsComplete",
                        value: true
                    },
                    {
                        columnName: "ProgressPercentage",
                        comparisonType: "between",
                        from: 25,
                        to: 50
                    }
                ]
            }
    
+ Response 200 (application/json)

        {
          "rows": [
            {
              "cells": [
                {
                  "column": "First Name",
                  "columnInternalName": "FirstName",
                  "value": "Jamie",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Last Name",
                  "columnInternalName": "LastName",
                  "value": "Burns",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Time Taken Total Seconds",
                  "columnInternalName": "TimeTakenTotalSeconds",
                  "value": "9389",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
             {
              "cells": [
                {
                  "column": "Progress Percent",
                  "columnInternalName": "ProgressPercentage",
                  "value": "100.0",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Is Completed",
                  "columnInternalName": "IsComplete",
                  "value": "True",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            }
          ]
        }


+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 401

+ Response 404

# Group Evaluation Question Report
Evaluation Question reporting related resources of the **Enable API**.

A report is generated by creating a report definition first, then executing that definition to retrieve the data.

The definition defines the name of the report, as well as the various parameters that indicate what data should be included in that report.

When executing a report definition, the result is in the form of JSON.

## Definition [/reporting/learn/evaluationQuestion]
The module allocation report definitions.

### List [GET]

Returned properties are a list of -
+ `reference` The reference of the report.  Use this when requesting the data.  This is a **GUID**
+ `name` This is the name of the report.  This is a **STRING**
+ `createdDate` This is the date when the report was created.  This date is **UTC**, according to **ISO 8601**.

No results will return an empty array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

+ Response 200 (application/json)

        [
            {
                "reference": "89f123a8-a890-43e7-b2cb-ec38700b8c3c",
                "name": "All Evaluations",
                "createdDate": "2019-02-18T08:29:41.167"
            },
            {
                "reference": "7470d5ab-c1d4-44d6-9507-56e6ffecaf9a",
                "name": "Evaluations for GroupA",
                "createdDate": "2019-02-15T11:56:39.853"
            }
        ]

+ Response 401

+ Response 404

### Add [POST]

The parameters are -
+ `name` *(required)* The name of the report.  Can be alpha-numeric, maximum 255 characters.  Must be a **STRING**
+ `includeInactiveUsers` *(optional, defaults to false)* When selected, inactive users are included.  This should be a **BOOL**
+ `userFilter` *(optional)* An object that specifies the filter that determines which users are included in the report.  This should be an **OBJECT**
+ `userFilter\filterType` *(required)* The type of user filter.  Options are **group** to filter by groups and **classification** to filter by classifications.  Must be a **STRING**
+ `userFilter\selected` *(optional)* A list of references to filter by, depending on what type is set in userFilter\filterType (when 'group' is specified this will be a list of group references, when 'classification' is specified this will be a list of classification references).  When this list is not specified or empty, then all groups/classifications will be included (for example, will return users that exist in any group or classification).  Must be an **ARRAY** of **GUID**
+ `dataFilter` *(optional, defaults to 'all')* The filter applied to related data in the report.  Options are **all** to return all data, and **byUserFilter** to only return related data that matches the filter specified in the user filter.  For example, say a user has two module allocations from two different groups and the user filter is set to return just one of these groups.  If a dataFilter of 'all' is specified then the allocations for both groups the user is a member of will be included, however if 'byUserFilter' is specified then only the allocations relating to the specified group will be included.  This should be a **STRING**
+ `dateFrom` *(optional, **DATETIME**)*  Defaults to 1 month before the current date and time. Restricts the report data to evaluations that have been completed since this date.
+ `selectedModules` *(optional)* A list of module references to filter by.  When this list is not specified or empty, then all modules will be included.  Must be an **ARRAY** of **GUID**
+ `selectedEvaluations` *(optional)* A list of evaluation references to filter by.  When this list is not specified or empty, then all evaluations will be included.  Must be an **ARRAY** of **GUID**

Returns the reference of the created report, which is a **GUID**.  This reference is used in the endpoint to export the data.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Users"
            }

+ Request Including inactive users (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                includeInactiveUsers: true
            }

+ Request Including dateFrom (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                dateFrom: "2021-05-01 14:44:40.900"
            }

+ Request By all groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                userFilter:
                {
                    filterType: "group"
                }
            }

+ Request By specific groups (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                }
            }

+ Request By specific groups and only include group data (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                userFilter:
                {
                    filterType: "group",
                    selected:
                    [
                        "d44a802e-f6c0-4633-aebe-45ce4e270917",
                        "7f4e5247-a5df-49c9-88fe-b33df3ced44d"
                    ]
                },
                dataFilter: "byUserFilter"
            }

+ Request By all classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                userFilter:
                {
                    filterType: "classification"
                }
            }

+ Request By specific classifications (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                userFilter:
                {
                    filterType: "classification",
                    selected:
                    [
                        "eafe48c8-f1b8-4668-ad07-b0afb9dd990f",
                        "f18b1546-d222-4fe8-8382-8436882f95cb"
                    ]
                }
            }

+ Request By specific modules (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                name: "Report For Evaluations",
                selectedModules:
                [
                    "5163b1e7-7317-4310-b976-8366f03d59dd",
                    "8c87dc90-b427-4a80-9555-f7b54cbb7668"
                ]
            }

+ Response 201 (application/json)

        89f123a8-a890-43e7-b2cb-ec38700b8c3c

+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 401

+ Response 404

## Delete [/reporting/learn/evaluationQuestion/{reference}]
Deletes a report that has been created via the API.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to delete.  This is returned from (POST) /reporting/core/users.

### Delete [DELETE]

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

+ Response 204 (application/json)

+ Response 401

+ Response 404

## Export [/reporting/learn/evaluationQuestion/{reference}/export]
Exports the data according to the report that has been created. Filters can be applied to any column that are requested in the report.

+ Parameters
    + reference (required, Guid, `a2c749f0-2aca-4d1e-8055-e354792a27f9`) ... The reference of the report to export.  This is returned from (POST) /reporting/learn/evaluationQuestion.

### Export [POST]

The parameters are -
+ `columns` *(required)* An array of the columns required to be exported.  This must be an **ARRAY** of **STRING**

+ `filterLogicOperator` *(optional)*  Options are **and** / **or**. Default value is **and**

+ `filters` *(optional)* An array of filters on the fields included in the **columns** parameter

+ `filters\columnName` *(required)* The name of the column to which the filter needs to be applied

+ `filters\comparisonType` *(required)* Except for **boolean** columnn type, this is required for all the other types. It can have values like **contains**, **greater than**, **between**. See below for the full list of acceptable values.

+ `filters\value`  If the comparison type is other than **between**, then this is a required field

+ `filters\from` If the comparison type is **between** and the datatype of the column is **number** or **date**, then this is the required field. It is the starting value in the range for which the records should be fetched

+ `filters\to` If the comparison type is **between** and the datatype of the column is **number** or **date**, then this is the required field. It is the utmost value in the range for which the records should be fetched

+ `filters\hours` If datatype of the column is **duration**, then this field is required

+ `filters\minutes` If datatype of the column is **duration**, then this field is required


The available columns are -
| Column Name                                | Description                                                                                                      | Restrictions                                                      |ColumnType
|:-------------------------------------------|------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|-------------------------------------------------------
| `EvaluationTitle`                          | The title of the evaluation                                                                                      |                                                                   | Text
| `EvaluationVersion`                        | The evaluation version                                                                                           |                                                                   | Number
| `ModuleTitle`                              | The module name                                                                                                  |                                                                   | Text
| `ModuleVersion`                            | The module version                                                                                               |                                                                   | Number
| `FirstName`                                | The first name of the user                                                                                       |                                                                   | Text
| `LastName`                                 | The last name of the user                                                                                        |                                                                   | Text
| `EmailAddress`                             | The email address of the user                                                                                    |                                                                   | Text
| `UserName`                                 | The user's username                                                                                              | Only available for domains using SSO or username identification   | Text
| `PageNumber`                               | The evaluation page number                                                                                       |                                                                   | Number
| `QuestionNumber`                           | The evaluation question number                                                                                   |                                                                   | Number
| `QuestionText`                             | The evaluation question text                                                                                     |                                                                   | Text
| `MatrixRowNumber`                          | The row number of matrix style questions                                                                         |                                                                   | Number
| `MatrixRowLabel`                           | The name of the matrix row                                                                                       |                                                                   | Text
| `ResponseType`                             | The type of the response: 'Multi Choice', 'Text', 'Matrix'                                                       |                                                                   | Text
| `ResponseText`                             | The user's response                                                                                              |                                                                   | Text
| `ResponseWeight`                           | The evaluation question weighting                                                                                |                                                                   | Text
| `MatrixResponseColumnNumber`               | The column number of the matrix response                                                                         |                                                                   | Number
| `MatrixResponseColumnLabel`                | The name of the matrix column                                                                                    |                                                                   | Text
| `MultipleChoiceResponseAnswer`             | The multiple choice response text                                                                                |                                                                   | Text
| `AllocatedDate`                            | The date that the module was allocated                                                                           |                                                                   | Date
| `StartedDate`                              | The date that the user started the module                                                                        |                                                                   | Date
| `CompletedDate`                            | The date that the user completed the module                                                                      |                                                                   | Date
| `AllocationVia`                            | How the module was allocated; 'Group', 'Instance', 'Inventory'                                                   |                                                                   | Text
| `AllocationMethod`                         | The method of allocation; 'Group', 'Individually'                                                                |                                                                   | Text
| `AllocatedFromGroupName`                   | The name of the group from which the module was allocated, if applicable                                         |                                                                   | Text
| `AllocatedFromLearningCollectionName`      | The name of the learning collection from which the module was allocated, if applicable                           |                                                                   | Text
| `AllocatedFromLearningPlanName`            | The name of the learning plan from which the module was allocated, if applicable                                 |                                                                   | Text
| `AllocatedFromChunkName`                   | The name of the learning chunk from which the module was allocated, if applicable                                |                                                                   | Text
| `IsAllocatedFromGroup`                     | Whether the allocation was created from a group                                                                  |                                                                   | Boolean
| `IsAllocatedFromInventory`                 | Whether the allocation was created from a user's inventoru                                                       | Requires the Shop feature                                         | Boolean
| `IsAllocatedFromInstance`                  | Whether the allocation was created from the instance                                                             |                                                                   | Boolean
| `IsAllocatedFromLearningCollection`        | Whether the allocation was created from a learning collection                                                    | Requires the Learning Collections feature                         | Boolean
| `IsAllocatedFromLearningPlan`              | Whether the allocation was created from a learning plan                                                          | Requires the Learning Plans feature                               | Boolean
| `IsAllocatedFromChunk`                     | Whether the allocation was created from a chunk                                                                  | Requires the Learning Chunks feature                              | Boolean
| `IsAutomatic`                              | Whether the allocation was created automatically                                                                 |                                                                   | Boolean
| `IsManual`                                 | Whether the allocation was created manually                                                                      |                                                                   | Boolean
| `Rating`                                   | The evaluation rating                                                                                            |                                                                   | Text
| `RatingPercentage`                         | The evaluation rating percentage                                                                                 |                                                                   | Number
| `IsScored`                                 | Indicates if the question is scored or not                                                                       |                                                                   | Boolean
| `IsMandatory`                              | Indicates if the question is mandatory or not                                                                    |                                                                   | Boolean
| `IsInactive`                               | Whether the user is inactive                                                                                     |                                                                   | Boolean
| `Branches`                                 | The comma separated list of branches the user is a member of                                                     | Requires the Branching feature                                    | Text
| `Groups`                                   | The comma separated list of groups the user is a member of                                                       |                                                                   | Text
| `LineManagers`                             | The comma separated list of line managers of the user                                                            | Requires the Line Managers feature                                | Text


The **comparison types** for each of the **column types** are as follows:
+ `Text` - contains, doesnotcontain, startswith, endswith, matchesexactly, isempty, isnotempty
+ `Number` - greaterthan, greaterthanorequalto, lessthan, lessthanorequalto, equals, notequalto, between, notbetween
+ `Date` - equals, before, from, between
+ `Duration` - greaterthan, greaterthanorequalto, lessthan, lessthanorequalto, equals, notequalto


Returned object -
+ `rows` The list of rows
+ `rows\cells` The list of cells within the row
+ `rows\cells\column` The readable name of the column
+ `rows\cells\columnInternalName` The system name of the column
+ `rows\cells\value` The value of the cell
+ `rows\cells\cellColor` The colour of the cell.  This will be an empty string when **hasCellColor** is false
+ `rows\cells\textColor` The colour of the text within the cell
+ `rows\cells\hasCellColor` Whether the cell has an associated colour

No results will return an object with an empty **rows** array.

+ Request (application/json)

    + Header

            x-api-version: 1.0
            x-api-nonce: 2147483647
            x-api-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts
            x-api-language: en-GB

    + Body

            {
                columns: ["FirstName", "LastName", "EvaluationTitle", "Rating"],
                filterLogicOperator: "or",
                filters: [
                    {
                        columnName: "FirstName",
                        comparisonType: "matchesexactly",
                        value: "Jamie"
                    },
                    {
                        columnName: "LastName",
                        comparisonType: "contains",
                        value: "Bur"
                    },
                    {
                        columnName: "Rating",
                        comparisonType: "matchesexactly",
                        value: "Good"
                    }
                ]
            }

+ Response 200 (application/json)

        {
          "rows": [
            {
              "cells": [
                {
                  "column": "First Name",
                  "columnInternalName": "FirstName",
                  "value": "Jamie",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Last Name",
                  "columnInternalName": "LastName",
                  "value": "Burns",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
            {
              "cells": [
                {
                  "column": "Evaluation Title",
                  "columnInternalName": "EvaluationTitle",
                  "value": "Course Rating",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            },
             {
              "cells": [
                {
                  "column": "Rating",
                  "columnInternalName": "Rating",
                  "value": "Good",
                  "cellColor": "",
                  "textColor": "F000000",
                  "hasCellColor": false
                }
              ]
            }
          ]
        }


+ Response 400

        [
            "Error description 1",
            "Error description 2"
        ]

+ Response 401

+ Response 404
